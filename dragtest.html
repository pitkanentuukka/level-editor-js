<html>
<head>

 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
<script src="http://code.jquery.com/jquery-1.9.1.js"></script>
<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
<link rel="stylesheet" href="/resources/demos/style.css">



 <style>
#level { width: 600px; height: 350px; padding: 0.5em; }
.resizable h3 { text-align: center; margin: 0; }
.draggable { position:absolute }
.ui-selected { border-style:solid; }
.ui-selecting { border-style:dotted; }
</style>
<script>
$(function() {
		$(".mappeditem").draggable({
			containment : "#level"
			});
	$(".mappeditem").selectable();
	$(".mappeditem").resizable();

	$("#level").resizable();
		/*
	$(".resizable" ).resizable();

	$( ".draggable" ).draggable({
		appendTo: "#level",
		helper: "clone",
		snap: true,
	});

	$( ".droppable" ).droppable({
		drop: function( event, ui ) {
		
			dropped =$(ui.helper).clone();
			$(dropped).removeClass("ui-draggable-dragging");
			$(dropped).removeClass("ui-draggable");
			$(dropped).removeClass("draggable");
			$(dropped).addClass("levelitem");
            $(this).append(dropped);
		
			$(".levelitem").addClass("selectable").
			addClass("draggable").
			addClass("ui-draggable");
		}
	});

*/
	$(".listeditem").draggable({
		appendTo: "#level",
		helper: "clone",
		snap: true,
		addClasses:false,
	}).bind ("dragstop", f = function (event, ui) {
		dragged = ui.helper.clone();
		$(dragged).draggable();
		$(dragged).resizable();
		});




	$(".listeditem").resizable();



	$( ".droppable" ).droppable({
		drop: function( event, ui ) {
		
			dropped =$(ui.helper).clone();
			$(dropped).removeClass("ui-draggable-dragging");
			$(dropped).removeClass("ui-draggable");
			$(dropped).removeClass("resizable");
			$(dropped).removeClass("ui-resizable");
			$(dropped).removeClass("draggable");
			$(dropped).removeClass("listeditem");
			$(dropped).addClass("mappeditem");
            $(this).append(dropped);
		}
	});

});



function generateLevel() {
	alert("painoit minua!");
	var levelwidth = $("#level").width();
	var levelheight = $("#level").height();
	/*$("#output").innerhtml("<?xml version=\"1.0\" encoding=\"utf-8\"?>");

	var leveldef = "<level width=\"" + levelwidth +"\" height=\"" + 
		levelheight + "\">";		

	$("#output").append(leveldef);



	$("#output").append("</level>");*/

	$("#output").text("testiteksti!");


}
$("#generator").click(generateLevel);

/*$(function() {
$(".box-clone").live('mouseover', function() {
    $(this).draggable();
});
$(".box").draggable({ 
    helper: 'clone'
    stop: function(event, ui) {
        $(ui.helper).clone(true).removeClass('box ui-draggable ui-draggable-dragging').addClass('box-clone').appendTo('body');
    }
});

*/





</script>

</head>
<body>
<div id="level" class="ui-widget-content droppable">
</div>
<div class="listeditem" width=96px height=96px><img src="tile2.png" width=100% height=100%></div>
<button id="generator">paina minua!</button>
<div id="output"></div>
</body>
</head>

